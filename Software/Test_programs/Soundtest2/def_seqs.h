/******************************************************************************

  YM3806 sound tests in PSR-70
  
  Default sequences for controlling YM3806, taken from the original sw.
  
  SDCC Z80

  15.2.2020

*****************************************************************************/

typedef struct seq_item_t {
    uint8_t reg;
    uint8_t val;
} SEQ_ITEM_T;

// Initialization sequence
const SEQ_ITEM_T def_init_seq[450] = {
    { 0x1D,0x10 },
    { 0x5D,0x20 },
    { 0x55,0x1E },
    { 0x4D,0x22 },
    { 0x45,0x20 },
    { 0x5D,0x81 },
    { 0x55,0x82 },
    { 0x4D,0x83 },
    { 0x45,0x81 },
    { 0x9D,0x9F },
    { 0x95,0x9F },
    { 0x8D,0x9F },
    { 0x85,0x9F },
    { 0xBD,0x80 },
    { 0xB5,0x00 },
    { 0xAD,0x02 },
    { 0xA5,0x00 },
    { 0xDD,0x00 },
    { 0xD5,0x00 },
    { 0xCD,0x04 },
    { 0xC5,0x00 },
    { 0x15,0x72 },
    { 0x1E,0x20 },
    { 0x1F,0x20 },
    { 0x5E,0x1F },
    { 0x56,0x1F },
    { 0x4E,0x20 },
    { 0x46,0x20 },
    { 0x5E,0x81 },
    { 0x56,0x81 },
    { 0x4E,0x81 },
    { 0x46,0x81 },
    { 0x9E,0x1F },
    { 0x96,0x1F },
    { 0x8E,0x1F },
    { 0x86,0x1F },
    { 0xBE,0x40 },
    { 0xB6,0x40 },
    { 0xAE,0x00 },
    { 0xA6,0x00 },
    { 0xFE,0x0F },
    { 0xF6,0x0F },
    { 0xEE,0x0F },
    { 0xE6,0x0F },
    { 0xDE,0x00 },
    { 0xD6,0x00 },
    { 0xCE,0x00 },
    { 0xC6,0x00 },
    { 0x16,0x7C },
    { 0x5F,0x1F },
    { 0x57,0x1F },
    { 0x4F,0x20 },
    { 0x47,0x20 },
    { 0x5F,0x81 },
    { 0x57,0x81 },
    { 0x4F,0x81 },
    { 0x47,0x81 },
    { 0x9F,0x1F },
    { 0x97,0x1F },
    { 0x8F,0x1F },
    { 0x87,0x1F },
    { 0xBF,0x40 },
    { 0xB7,0x40 },
    { 0xAF,0x00 },
    { 0xA7,0x00 },
    { 0xFF,0x0F },
    { 0xF7,0x0F },
    { 0xEF,0x0F },
    { 0xE7,0x0F },
    { 0xDF,0x00 },
    { 0xD7,0x00 },
    { 0xCF,0x00 },
    { 0xC7,0x00 },
    { 0x17,0x7C },
    { 0xFF,0x08 },
    { 0xEF,0x00 },
    { 0x05,0x07 },
    { 0x18,0x00 },
    { 0xE0,0x0B },
    { 0xE8,0x0B },
    { 0xF0,0x0B },
    { 0xF8,0x0B },
    { 0x05,0x00 },
    { 0xE0,0x5F },
    { 0xE8,0x0F },
    { 0xF0,0x0F },
    { 0xF8,0x0F },
    { 0x58,0x20 },
    { 0x50,0x20 },
    { 0x48,0x20 },
    { 0x40,0x20 },
    { 0x58,0x80 },
    { 0x50,0x81 },
    { 0x48,0x83 },
    { 0x40,0x81 },
    { 0x98,0x1F },
    { 0x90,0x1F },
    { 0x88,0x1F },
    { 0x80,0x1F },
    { 0xB8,0x9F },
    { 0xB0,0x9F },
    { 0xA8,0x9F },
    { 0xA0,0x1F },
    { 0xD8,0x00 },
    { 0xD0,0x00 },
    { 0xC8,0x00 },
    { 0xC0,0x00 },
    { 0x10,0xBD },
    { 0x19,0x00 },
    { 0xE1,0x0B },
    { 0xE9,0x0B },
    { 0xF1,0x0B },
    { 0xF9,0x0B },
    { 0x05,0x01 },
    { 0xE1,0x5F },
    { 0xE9,0x0F },
    { 0xF1,0x0F },
    { 0xF9,0x0F },
    { 0x59,0x20 },
    { 0x51,0x20 },
    { 0x49,0x20 },
    { 0x41,0x20 },
    { 0x59,0x80 },
    { 0x51,0x81 },
    { 0x49,0x83 },
    { 0x41,0x81 },
    { 0x99,0x1F },
    { 0x91,0x1F },
    { 0x89,0x1F },
    { 0x81,0x1F },
    { 0xB9,0x9F },
    { 0xB1,0x9F },
    { 0xA9,0x9F },
    { 0xA1,0x1F },
    { 0xD9,0x00 },
    { 0xD1,0x00 },
    { 0xC9,0x00 },
    { 0xC1,0x00 },
    { 0x11,0xBD },
    { 0x1A,0x00 },
    { 0xE2,0x0B },
    { 0xEA,0x0B },
    { 0xF2,0x0B },
    { 0xFA,0x0B },
    { 0x05,0x02 },
    { 0xE2,0x5F },
    { 0xEA,0x0F },
    { 0xF2,0x0F },
    { 0xFA,0x0F },
    { 0x5A,0x20 },
    { 0x52,0x20 },
    { 0x4A,0x20 },
    { 0x42,0x20 },
    { 0x5A,0x80 },
    { 0x52,0x81 },
    { 0x4A,0x83 },
    { 0x42,0x81 },
    { 0x9A,0x1F },
    { 0x92,0x1F },
    { 0x8A,0x1F },
    { 0x82,0x1F },
    { 0xBA,0x9F },
    { 0xB2,0x9F },
    { 0xAA,0x9F },
    { 0xA2,0x1F },
    { 0xDA,0x00 },
    { 0xD2,0x00 },
    { 0xCA,0x00 },
    { 0xC2,0x00 },
    { 0x12,0xBD },
    { 0x1B,0x00 },
    { 0xE3,0x0B },
    { 0xEB,0x0B },
    { 0xF3,0x0B },
    { 0xFB,0x0B },
    { 0x05,0x03 },
    { 0xE3,0x5F },
    { 0xEB,0x0F },
    { 0xF3,0x0F },
    { 0xFB,0x0F },
    { 0x5B,0x20 },
    { 0x53,0x20 },
    { 0x4B,0x20 },
    { 0x43,0x20 },
    { 0x5B,0x80 },
    { 0x53,0x81 },
    { 0x4B,0x83 },
    { 0x43,0x81 },
    { 0x9B,0x1F },
    { 0x93,0x1F },
    { 0x8B,0x1F },
    { 0x83,0x1F },
    { 0xBB,0x9F },
    { 0xB3,0x9F },
    { 0xAB,0x9F },
    { 0xA3,0x1F },
    { 0xDB,0x00 },
    { 0xD3,0x00 },
    { 0xCB,0x00 },
    { 0xC3,0x00 },
    { 0x13,0xBD },
    { 0x1C,0x00 },
    { 0xE4,0x0B },
    { 0xEC,0x0B },
    { 0xF4,0x0B },
    { 0xFC,0x0B },
    { 0x05,0x04 },
    { 0xE4,0x5F },
    { 0xEC,0x0F },
    { 0xF4,0x0F },
    { 0xFC,0x0F },
    { 0x5C,0x20 },
    { 0x54,0x20 },
    { 0x4C,0x20 },
    { 0x44,0x20 },
    { 0x5C,0x80 },
    { 0x54,0x81 },
    { 0x4C,0x83 },
    { 0x44,0x81 },
    { 0x9C,0x1F },
    { 0x94,0x1F },
    { 0x8C,0x1F },
    { 0x84,0x1F },
    { 0xBC,0x9F },
    { 0xB4,0x9F },
    { 0xAC,0x9F },
    { 0xA4,0x1F },
    { 0xDC,0x00 },
    { 0xD4,0x00 },
    { 0xCC,0x00 },
    { 0xC4,0x00 },
    { 0x14,0xBD },
    { 0x1D,0x00 },
    { 0xE5,0x0B },
    { 0xED,0x0B },
    { 0xF5,0x0B },
    { 0xFD,0x0B },
    { 0x05,0x05 },
    { 0xE5,0x5F },
    { 0xED,0x0F },
    { 0xF5,0x0F },
    { 0xFD,0x0F },
    { 0x5D,0x20 },
    { 0x55,0x20 },
    { 0x4D,0x20 },
    { 0x45,0x20 },
    { 0x5D,0x80 },
    { 0x55,0x81 },
    { 0x4D,0x83 },
    { 0x45,0x81 },
    { 0x9D,0x1F },
    { 0x95,0x1F },
    { 0x8D,0x1F },
    { 0x85,0x1F },
    { 0xBD,0x9F },
    { 0xB5,0x9F },
    { 0xAD,0x9F },
    { 0xA5,0x1F },
    { 0xDD,0x00 },
    { 0xD5,0x00 },
    { 0xCD,0x00 },
    { 0xC5,0x00 },
    { 0x15,0xBD },
    { 0x1E,0x00 },
    { 0xE6,0x0B },
    { 0xEE,0x0B },
    { 0xF6,0x0B },
    { 0xFE,0x0B },
    { 0x05,0x06 },
    { 0xE6,0x5F },
    { 0xEE,0x0F },
    { 0xF6,0x0F },
    { 0xFE,0x0F },
    { 0x5E,0x20 },
    { 0x56,0x20 },
    { 0x4E,0x20 },
    { 0x46,0x20 },
    { 0x5E,0x80 },
    { 0x56,0x81 },
    { 0x4E,0x83 },
    { 0x46,0x81 },
    { 0x9E,0x1F },
    { 0x96,0x1F },
    { 0x8E,0x1F },
    { 0x86,0x1F },
    { 0xBE,0x9F },
    { 0xB6,0x9F },
    { 0xAE,0x9F },
    { 0xA6,0x1F },
    { 0xDE,0x00 },
    { 0xD6,0x00 },
    { 0xCE,0x00 },
    { 0xC6,0x00 },
    { 0x16,0xBD },
    { 0x1F,0x00 },
    { 0xE7,0x0B },
    { 0xEF,0x0B },
    { 0xF7,0x0B },
    { 0xFF,0x0B },
    { 0x05,0x07 },
    { 0xE7,0x5F },
    { 0xEF,0x0F },
    { 0xF7,0x0F },
    { 0xFF,0x0F },
    { 0x5F,0x20 },
    { 0x57,0x20 },
    { 0x4F,0x20 },
    { 0x47,0x20 },
    { 0x5F,0x80 },
    { 0x57,0x81 },
    { 0x4F,0x83 },
    { 0x47,0x81 },
    { 0x9F,0x1F },
    { 0x97,0x1F },
    { 0x8F,0x1F },
    { 0x87,0x1F },
    { 0xBF,0x9F },
    { 0xB7,0x9F },
    { 0xAF,0x9F },
    { 0xA7,0x1F },
    { 0xDF,0x00 },
    { 0xD7,0x00 },
    { 0xCF,0x00 },
    { 0xC7,0x00 },
    { 0x17,0xBD },
    { 0x04,0xDD },
    { 0x04,0x55 },
    { 0x60,0x19 },
    { 0x68,0x19 },
    { 0x70,0x09 },
    { 0x78,0x1D },
    { 0x61,0x19 },
    { 0x69,0x19 },
    { 0x71,0x09 },
    { 0x79,0x1D },
    { 0x62,0x19 },
    { 0x6A,0x19 },
    { 0x72,0x09 },
    { 0x7A,0x1D },
    { 0x63,0x19 },
    { 0x6B,0x19 },
    { 0x73,0x09 },
    { 0x7B,0x1D },
    { 0x64,0x19 },
    { 0x6C,0x19 },
    { 0x74,0x09 },
    { 0x7C,0x1D },
    { 0x65,0x19 },
    { 0x6D,0x19 },
    { 0x75,0x09 },
    { 0x7D,0x1D },
    { 0x66,0x19 },
    { 0x6E,0x19 },
    { 0x76,0x09 },
    { 0x7E,0x1D },
    { 0x67,0x19 },
    { 0x6F,0x19 },
    { 0x77,0x09 },
    { 0x7F,0x1D },
    { 0x18,0x00 },
    { 0xF8,0x09 },
    { 0xF0,0x09 },
    { 0xE8,0x09 },
    { 0xE0,0x59 },
    { 0x19,0x00 },
    { 0xF9,0x09 },
    { 0xF1,0x09 },
    { 0xE9,0x09 },
    { 0xE1,0x59 },
    { 0x1A,0x00 },
    { 0xFA,0x09 },
    { 0xF2,0x09 },
    { 0xEA,0x09 },
    { 0xE2,0x59 },
    { 0x1B,0x00 },
    { 0xFB,0x09 },
    { 0xF3,0x09 },
    { 0xEB,0x09 },
    { 0xE3,0x59 },
    { 0x1C,0x00 },
    { 0xFC,0x09 },
    { 0xF4,0x09 },
    { 0xEC,0x09 },
    { 0xE4,0x59 },
    { 0x1D,0x00 },
    { 0xFD,0x09 },
    { 0xF5,0x09 },
    { 0xED,0x09 },
    { 0xE5,0x59 },
    { 0x1E,0x00 },
    { 0xFE,0x09 },
    { 0xF6,0x09 },
    { 0xEE,0x09 },
    { 0xE6,0x59 },
    { 0x1F,0x00 },
    { 0xFF,0x09 },
    { 0xF7,0x09 },
    { 0xEF,0x09 },
    { 0xE7,0x59 },
    { 0,0 }
};

// Note on sequence (C4)
const SEQ_ITEM_T def_note_on_seq[25] = {
    { 0xE1,0x0B },
    { 0xE9,0x0C },
    { 0xF1,0x0C },
    { 0xF9,0x0C },
    { 0x05,0x01 },
    { 0x39,0xCA },
    { 0x29,0x44 },
    { 0x31,0xCA },
    { 0x21,0x44 },
    { 0xE1,0x5F },
    { 0xE9,0x0F },
    { 0xF1,0x0F },
    { 0xF9,0x0F },
    { 0x61,0x1C },
    { 0x69,0x1E },
    { 0x71,0x20 },
    { 0x79,0x1F },
    { 0x19,0x00 },
    //{ 0x05,0x79 },
    { 0,0 }
};

const SEQ_ITEM_T def_note_off_seq[10] = {
    { 0xF9,0x09 },
    { 0xF1,0x09 },
    { 0xE9,0x09 },
    { 0xE1,0x59 },
    //{ 0xE1,0x53 },
    { 0x05,0x01 },
    { 0,0 }
};

const SEQ_ITEM_T start_test_seq[15] = {
    { 0x11,0x7D },          // vibrato off
    { 0x41,0x81 },          // factors = 1
    { 0x49,0x81 },
    { 0x51,0x81 },
    { 0x59,0x81 },
    { 0x61,0x00 },          // levels = max
    { 0x69,0x00 },
    { 0x71,0x00 },
    { 0x79,0x00 },
    { 0,0 }
};
   